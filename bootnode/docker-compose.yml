version: "3.8"

services:
  #  _                 _                   _
  # | |__   ___   ___ | |_ _ __   ___   __| | ___
  # | '_ \ / _ \ / _ \| __| '_ \ / _ \ / _` |/ _ \
  # | |_) | (_) | (_) | |_| | | | (_) | (_| |  __/
  # |_.__/ \___/ \___/ \__|_| |_|\___/ \__,_|\___|
  bootnode:
    # Pegged charon version (update this for each release).
    # image: obolnetwork/charon:${CHARON_VERSION}
    image: ghcr.io/obolnetwork/charon:d8eca51
    environment:
      CHARON_JAEGER_ADDRESS: jaeger:6831
      CHARON_P2P_TCP_ADDRESS: 0.0.0.0:3610
      CHARON_P2P_UDP_ADDRESS: 0.0.0.0:3630
      CHARON_LOG_LEVEL: debug
      CHARON_P2P_RELAY_LOGLEVEL: debug
      CHARON_BOOTNODE_HTTP_ADDRESS: "0.0.0.0:3640"
      CHARON_P2P_BOOTNODES: ""
      CHARON_P2P_EXTERNAL_HOSTNAME: bootnode
      CHARON_JAEGER_SERVICE: charon
    ports:
      - 3600:3600/tcp
      - 3610:3610/tcp
      - 3620:3620/tcp
      - 3630:3630/udp
    command: |
      bootnode
      --p2p-external-ip="34.91.187.129"
      --p2p-external-hostname="34.91.187.129"
    networks: [bootnode]
    volumes:
      - .charon:/opt/charon/.charon
    restart: on-failure
networks:
  bootnode:
